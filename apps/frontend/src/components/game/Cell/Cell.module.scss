@use "../../../styles/tokens/variables" as *;

.cell {
  aspect-ratio: 1 / 1;
  border: 1px solid color-mix(in srgb, var(--color-primary), transparent 90%);
  background: color-mix(in srgb, var(--color-bg-deep), transparent 70%);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-in-out);
  position: relative;
  overflow: hidden;

  &:hover {
    background: color-mix(in srgb, var(--color-primary), transparent 90%);
    box-shadow: inset 0 0 10px color-mix(in srgb, var(--color-primary), transparent 80%);
  }

  &--ship {
    background: color-mix(in srgb, var(--color-primary), transparent 70%);
    border-color: color-mix(in srgb, var(--color-primary), transparent 50%);
  }

  &--hit {
    background: color-mix(in srgb, var(--color-accent-orange), transparent 80%);
    box-shadow: inset 0 0 15px color-mix(in srgb, var(--color-accent-orange), transparent 60%);
    border-color: var(--color-accent-orange);
    
    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60%;
      height: 60%;
      background: var(--color-accent-orange);
      border-radius: 50%;
      box-shadow: 0 0 10px var(--color-accent-orange);
      animation: pulse 1.5s infinite;
    }
  }

  &--miss {
    background: color-mix(in srgb, var(--color-danger), transparent 90%);
    
    &::before, &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 60%;
      height: 2px;
      background: color-mix(in srgb, var(--color-danger), transparent 50%);
    }
    &::before { transform: translate(-50%, -50%) rotate(45deg); }
    &::after { transform: translate(-50%, -50%) rotate(-45deg); }
  }

  &--revealed {
    background: rgba(34, 211, 238, 0.2); // Cyan alpha
    border: 1px dashed var(--color-accent-cyan);
  }

  &--revealed-ship {
    background: color-mix(in srgb, var(--color-warning), transparent 60%);
    border: 2px dashed var(--color-warning);
    box-shadow: inset 0 0 15px color-mix(in srgb, var(--color-warning), transparent 50%);
    
    &::after {
      content: 'âš ';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.2rem;
      color: var(--color-warning);
    }
  }

  &--revealed-empty {
    background: rgba(34, 211, 238, 0.1); 
    border: 1px dotted rgba(34, 211, 238, 0.3);
    opacity: 0.6;
  }

  &--revealed-mine {
    background: color-mix(in srgb, var(--color-danger), transparent 60%);
    border: 2px dashed var(--color-danger);
    box-shadow: inset 0 0 15px color-mix(in srgb, var(--color-danger), transparent 50%);
    
    &::after {
      content: 'ðŸ’£'; 
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.2rem;
    }
  }

  &--ghost {
    background: rgba(255, 255, 255, 0.3); // Highlighting pattern
    border: 1px solid var(--color-text-primary);
  }
}

@keyframes pulse {
  0% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.8; }
  50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.8; }
}
